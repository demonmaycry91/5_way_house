{% extends "base.html" %}

{% block title %}每日營運儀表板{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="mb-0">每日營運儀表板</h2>
        <p class="text-muted">日期：{{ today_date }}</p>
    </div>
    <a href="{{ url_for('cashier.logout') }}" class="btn btn-outline-secondary">登出</a>
</div>

{# 顯示 flash 訊息 #}
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<div class="list-group">
    {% for location, data in locations_status.items() %}
    <a href="{{ data.url }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
        <div>
            <h5 class="mb-1">{{ location }}</h5>
            <small>{{ data.message }}</small>
        </div>
        <span class="badge rounded-pill {{ data.badge_class }}">
            {{ data.status_text }}
        </span>
    </a>
    {% else %}
    <div class="list-group-item">
        <p class="text-center text-muted my-3">尚未設定任何營運據點。</p>
        <p class.text-center text-muted my-3>請先在後台新增據點</p>
    </div>
    {% endfor %}
</div>

{% endblock %}